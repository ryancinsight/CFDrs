[package]
name = "cfd-mesh"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Watertight CFD mesh generation for millifluidic devices — GhostCell-permissioned, indexed, BSP-based"
keywords = ["mesh", "cfd", "millifluidic", "watertight", "ghostcell"]
categories = ["science", "simulation"]

[features]
default = ["f64"]
f64 = []
f32 = []
millifluidic = []
parallel = ["dep:rayon"]
csg = []
stl-io = []
vtk-io = []
scheme-io = ["dep:cfd-schematics"]

[dependencies]
# Math
nalgebra = { workspace = true }
num-traits = { workspace = true }
approx = { workspace = true }

# Error handling
thiserror = { workspace = true }
anyhow = { workspace = true }

# Data structures
indexmap = { workspace = true }
slotmap = { workspace = true }

# Mesh / geometry — state-of-the-art kernel
geometry-predicates = { workspace = true }
rstar               = { workspace = true }
kiddo               = { workspace = true }
bvh                 = { workspace = true }
spade               = { workspace = true }

# Serialization
serde = { workspace = true }
serde_json = { workspace = true }

# Hashing
hashbrown = "0.15"

# Parallelism (optional)
rayon = { workspace = true, optional = true }

# Internal crates (optional)
cfd-schematics = { workspace = true, optional = true }

# Logging
tracing = { workspace = true }

# Documentation diagrams
aquamarine = { workspace = true }

[dev-dependencies]
approx = { workspace = true }
proptest = { workspace = true }
criterion = { workspace = true }
